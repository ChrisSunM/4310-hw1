<!DOCTYPE html>
<html>
  <head>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="https://d3js.org/topojson.v3.min.js"></script>
    <style>
      #geo {
        fill: #c8aa76
      }
    </style>
  </head>
  <body>
    <h2>HW 1</h2>
    <svg id = "geo" height="1000" width="1000"/>
    <script>
      let svg = d3.select('#geo');
      const margins = {top: 10, right: 20, bottom: 10, left: 20};
      const background = svg.append("g").attr("transform", `translate(${margins.left},${margins.top})`);
      const createGraph = async function() {
        const sfgeo = await d3.json("SF-Neighborhoods.geo.json");
        console.log(sfgeo);
        var map = topojson.feature(sfgeo, sfgeo.objects.SFNeighborhoods);
        var projection = d3.geoMercator().fitSize([960, 980], map);
        var path = d3.geoPath().projection(projection);
        background.selectAll("path.maps").data(map.features)
          .attr("class", "maps")
          .join("path")
          .attr("d", path);
        const points = await d3.csv("Street_Tree_List-2022-01-30_FILTERED.csv");
        console.log(points);
        points.forEach(d => {
          d.Position = projection([d.Longitude, d.Latitude]);
        });
        background.selectAll("circle").data(points)
          .join("circle")
          .attr("cx", d => d.Position[0])
          .attr('cy', d=> d.Position[1])
          .attr("r", 1)
          .attr('fill', "#c9243f")
      }
      createGraph();
    </script>
  </body>
</html>
